# EXPECT: typefail

# Build the `A
x1 = 0;
y2 := x1;
x3 = `A y2;
# Build the `B
x4 = 1;
y5 := x4;
x6 = `B y5;
# Get a type-ambiguous boolean
x7 = 3;
x8 = 4;
x9 = x7 == x8;
# Pick the `A or the `B based on the boolean
x10 = y11:`True y12:() -> {
            x13 = x3
        };
x14 = y15:`False y16:() -> {
            x17 = x6
        };
x18 = x10 & x14;
x19 = x18 x9;
# Now try to match the conjunction
x20 = y21:`A y22:() & `B y23:() -> {
            x24 = ()
        };
x25 = x20 x19
