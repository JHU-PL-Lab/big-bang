# EXPECT: typefail

# Build the `A
x1 = 0;
y2 := x1;
x3 = `A y2;
# Build the `B
x4 = 1;
y5 := x4;
x6 = `B y5;
# Get a type-ambiguous boolean
x7 = 3;
x8 = 4;
x9 = x7 == x8;
# Pick the `A or the `B based on the boolean
x10 = y11:`True y12:() -> {
            x13 = x3
        };
x14 = y15:`False y16:() -> {
            x17 = x6
        };
x18 = x10 & x14;
x19 = x18 x9;
# Put the argument under an onion
x20 = 2;
y21 := x20;
x22 = `C y21;
x23 = x19 & x22;
# Now try to match the conjunction
x24 = y25:`A y26:() & `B y27:() -> {
            x28 = ()
        };
x29 = x24 x23
